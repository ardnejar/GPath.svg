/*!
  GPath.svg - v0.1.0 - 2014-12-21
  https://github.com/ardnejar/GPath.svg
  Copyright (c) 2014 Rajendra Serber
  Licensed under MIT license
*/
function GPathInfo(a,b){this.svg_document=a,this.options=b,this.gpath=parseSVG(a),this.text=gpathToText(this),this.errors=displayShapeErrors()}function parseSVG(a){var b={groups:[]},c=$.parseXML(a),d=$(c).find("svg"),e=d.find("g");if(e.length)for(var f=0;f<e.length;f++)b.groups.push(parseGroups(e[f]));else b.groups=[{name:d.attr("id"),shapes:extractLayer(d.children())}];return b}function parseGroups(a){var b={name:a.id},c=getChildren(a);return c.length>0&&(b.shapes=extractLayer(c)),b}function getChildren(a){for(var b={},c=a.firstElementChild,d=0;null!=c;)b[d++]=c,c=c.nextElementSibling;return b.length=d,b}function extractLayer(a){for(var b=[],c=0;c<a.length;c++)b.push(parseShape(c,a[c]));return b}function parseShape(a,b){var c;switch(b.nodeName){case"path":c=pathToGPath(b.pathSegList);break;case"polygon":case"polyline":c=pointsToGPath(b.points);break;case"rect":c=rectToGPath(b);break;case"line":c=lineToGPath(b);break;case"ellipse":c=extractSVGpoints(b,["cx","cy","rx","ry"]);break;case"circle":c=extractSVGpoints(b,["cx","cy","r"])}var d={name:b.id,index:a,shape:b.nodeName,points:c};return d}function extractSVGpoints(a,b){for(var c,d={},e=0;e<b.length;e++)c=void 0===a.getAttribute(b[e])?"0":a.getAttribute(b[e]),d[b[e]]=c.search(/\s|\,/)<0?Number(c):c;return d}function rectToGPath(a){var b=extractSVGpoints(a,["x","y","height","width"]),c=b.x,d=b.y,e=c+b.width,f=d+b.height,g=[{x:c,y:d},{x:e,y:d},{x:e,y:f},{x:c,y:f}];return g}function lineToGPath(a){var b=extractSVGpoints(a,["x1","y1","x2","y2"]),c=[{x:b.x1,y:b.y1},{x:b.x2,y:b.y2}];return c}function pointsToGPath(a){for(var b=[],c=0;c<a.length;c++)b.push(a[c]);return b}function pathToGPath(a){for(var b=[],c=0;c<a.numberOfItems;c++)a.getItem(c).constructor!==SVGPathSegClosePath&&b.push(adjustPathPoint(a.getItem(c)));return b}function adjustPathPoint(a){var b,c;switch(a.pathSegTypeAsLetter){case"H":b=a.x,c=last_point.y;break;case"V":b=last_point.x,c=a.y;break;case"h":b=a.x+last_point.x,c=last_point.y;break;case"v":b=last_point.x,c=a.y+last_point.y;break;default:b=a.x,c=a.y,/[astzqlc]/.test(a.pathSegTypeAsLetter)&&(b+=last_point.x,c+=last_point.y)}return last_point={command:a.pathSegTypeAsLetter,x:Number(b),y:Number(c)},{command:a.pathSegTypeAsLetter,x:Number(b),y:Number(c)}}function gpathToText(a){var b="";return shapes_omited=0,converted_curves=0,options=a.options,b+=groupsToText(a)}function groupsToText(a){for(var b=a.gpath.groups,c="",d=0;d<b.length;d++)if(void 0!==b[d].shapes){var e=shapesToText(b[d].shapes);c+=displayGPathInfoDeclarePathsArray(b[d].name),c+=e,c+="};\n\n"}return c}function shapesToText(a){var b,c="",d="";path_count=0;for(var e=0;e<a.length;e++)"circle"===a[e].shape||"ellipse"===a[e].shape||"polyline"===a[e].shape?(d+="  // "+a[e].shape.toUpperCase()+" OMITTED\n",shapes_omited++):Array.isArray(a[e].points)&&(path_count++,c=pointsLoop(a[e].points),b="["+(path_count-1)+"] "+a[e].shape+" "+a[e].name,d+=displayGPathStructWrap(b,c,a[e].points.length),e<a.length-1&&(d+=","),d+="\n");return d}function pointsLoop(a){for(var b="",c=0;c<a.length;c++)b+=pointsString(a[c]),c<a.length-1&&(b+=","),void 0!==a[c].command&&/[astqc]/.test(a[c].command.toLowerCase())&&(b+=" // CURVE CONVERTED",converted_curves++),b+="\n";return b}function pointsString(a){return"      {"+floatOption(a.x)+", "+floatOption(a.y)+"}"}function floatOption(a){return"none"!==options.decimal&&(a=Number(a).toFixed(options.decimal)),Number(a)}function displayGPathStructWrap(a,b,c){var d="  { // "+a+"\n    .num_points = "+c+",\n    .points = (GPoint []) {\n"+b+"    }\n  }";return d}function displayShapeErrors(){var a,b=[];return shapes_omited>0&&b.push(shapes_omited+" UNSUPPORTED SHAPES OMITTED"),converted_curves>0&&b.push(converted_curves+" CURVES CONVERTED"),b.length>0?a=b.join("!<br>\n")+"!\n":""}function displayGPathInfoDeclarePathsArray(a){a=a.toUpperCase();var b="#define "+a+"_PATH_COUNT "+path_count+"\n";return b+="static const struct GPathInfo "+a+"_PATHS[] = {\n"}var last_point={command:"",x:0,y:0},path_count;